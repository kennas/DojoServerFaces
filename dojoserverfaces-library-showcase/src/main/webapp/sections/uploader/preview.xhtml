<?xml version="1.0" encoding="UTF-8" ?><!--
    	Copyright (c) 2011, The Dojo Foundation All Rights Reserved.
    	Available via Academic Free License >= 2.1 OR the modified BSD license.
    	see: http://dojotoolkit.org/license for details
 --><ui:composition xmlns="http://www.w3.org/1999/xhtml"	xmlns:ui="http://java.sun.com/jsf/facelets"	xmlns:f="http://java.sun.com/jsf/core"	xmlns:h="http://java.sun.com/jsf/html"	xmlns:c="http://java.sun.com/jsp/jstl/core"	xmlns:dojo="http://www.dojoserverfaces.org/core">	<h:form id="form">		<dojo:listener topic="upload-begin">			<dojo:behaviorSetDisplay target=":progressBar" value="true" />		</dojo:listener>		<dojo:listener topic="upload-progress">			<dojo:behaviorUpdateProgressBar target=":progressBar" progress="@event" />		</dojo:listener>		<dojo:listener topic="upload-complete">			<dojo:behaviorSetDisplay target=":progressBar" value="false" />			<dojo:behaviorClick target="form:refreshResult" />		</dojo:listener>		<dojo:listener topic="delete-success">			<dojo:behaviorClick target="form:refreshResult" />		</dojo:listener>				<dojo:button id="refreshResult" style="display:none;">			<f:ajax render="result" />		</dojo:button>	</h:form>	<h:panelGrid id="uploaderGrid" columns="3">		<dojo:uploader id="uploadFiles" label="#{uploader.label}"			plugin="#{uploader.plugin}" multiple="#{uploader.multiple}"			uploadOnSelect="#{uploader.uploadOnSelect}"			url="#{uploader.url}"		>			<dojo:behaviorBroadcast event="begin" topic="upload-begin" />			<dojo:behaviorBroadcast event="progress" topic="upload-progress"				data="event.bytesLoaded/event.bytesTotal" />			<dojo:behaviorBroadcast event="complete" topic="upload-complete" />		</dojo:uploader>		<dojo:button id="submit" label="Upload">			<dojo:behaviorUpload target="uploadFiles" />		</dojo:button>		<dojo:button id="reset" label="Reset">			<dojo:behaviorUploaderReset target="uploadFiles" />		</dojo:button>		<dojo:progressBar id="progressBar" style="display: none;" />	</h:panelGrid>	<ui:remove>		<h:form id="form" method="post" enctype="multipart/form-data">			<input id="uploadFiles" type="file" />			<dojo:button id="reset" label="Reset"				onClick="dijit.byId('uploadFiles').reset();" />			<dojo:button id="Submit" label="Upload"				onClick="dijit.byId('uploadFiles').upload();" />			<div id="files" uploaderId="uploadFiles"				dojoType="dojox.form.uploader.FileList" />		</h:form>	</ui:remove>	<hr class="separator" />	<h:panelGrid id="result" columns="3" 		columnClasses="upload-file-name,upload-file-size,delete-file" style="width: 65%;">		<c:forEach items="#{uploader.uploadedFiles}" var="uploadedFile">			<h:outputLink				value="#{uploader.url}/file/#{uploadedFile.key}">				#{uploadedFile.value.displayName}			</h:outputLink>			<h:outputText value="#{uploadedFile.value.length}" />			<dojo:button label="Delete"				onClick="dojo.xhrDelete({url:'#{uploader.url}/#{uploadedFile.key}',load:function(data){dojo.publish('delete-success');}})">			</dojo:button>		</c:forEach>	</h:panelGrid>		<ui:debug hotkey="p" /></ui:composition>